# DAY16

#### 상관분석

cor() - 상관계수 추출

with() - ""   	""

cor.test - 피어슨 상관계수 

pairs() - 상관계수 행렬 

##### 상관계수를 구하기 전에 먼저 결측치를 제거해야 함 

options(digits=2) #소수점 이하 둘째까지..

library(psych) 의 paris.panels() or pairs()를 통해 여러 변수간의 상관계수와 p-value를 볼 수 있다

library(corrgram) 을 통해서 상관계수를 원그래프로 나타낼 수 있다.

library(corrplot) 을 통해서 상관계수를 색의 농도로 표현가능하다.

---

 #### 회귀분석 (단순선형 & 다중회귀)

단순회귀분석 : 두 변수간의 인과관계를 조사하는 방법 , 두 개 이상의 설명변수를 사용할 경우 다중선형회귀라고 한다. 

상관계수는 크게 피어슨, 스피어만 두 개가 있다.
피어슨의 경우 두 변수간 상관관계를 볼 수 있고, 스피어만의 경우에는 데이터가 자료의 값이 아니라 순위를 나타내는 서열척도인 경우에 사용하는 상관관계법이다.

---

< 단순 선형 회귀 분석 >

\# 회귀분석에서의 검토사항

 \- 회귀계수들이 유의미한가? **t통계량의 p-값이 0.05보다 작아야** 통계적으로 유의!
(t 통계량이 클수록 p-value는 작아짐)

 \- 모형이 얼마나 설명력을 갖는가? **결정계수**(R**2) 확인 !

 \- 모형이 데이터를 잘 적합하고 있는가? 잔차를 그래프로 그리고 회귀진단



< 다중선형회귀분석 >

\- 독립변수의 수가 증가 -> 설명력 증가 -> y에 대한 x의 상대적 영향력 감소

\- 추정치의 표준 오차에 대한 분석 : t-분석

\- 회귀분석의 적합성 진단하는 방법 : 잔차분석



\# 모형의 통계적 유의성

\- 모형의 통계적 유의성은 F통계량으로 확인

\- 유의수준 5% 이하에서 F통계량의 p-값이 0.05보다 작으면 추정된 회귀식은 통계적으로 유의

\- F통계량이 크면 p-value가 0.05보다 작아짐 -> 귀무가설 기각

**[출처]** [ADsP 데이터 분석 준전문가 PART 03 - 4장_2 통계 분석](https://blog.naver.com/suzy8073/222269773453)|**작성자** [suzy8073](https://blog.naver.com/suzy8073)

즉, 변수의 유의수준은 t검정을 통한 t통계량을 사용하고 모형의 유의수준은 f검정을 통해 f통계량을 사용한다. t검정과 f검정 모두 p-value를 내보내기 때문에 유의수준을 파악할 수 있다.

---

plot()을 이용하여 선형관계 확인 

abline(lm(Y~X)) : lm,선형모델의 함수에 선을 그려넣는다. (abline은 회귀계수를 필요로한다. 즉, lm모델을 넣지 않고, coef()함수로 직접 구해서 넣어도 선은 그려진다. )

lm()함수로 선형회귀 모델 생성

residuals() 함수로 잔차 확인(추정값과 실제값의 차이)
(잔차를 최소화하는 직선을 잘 정해야 설명력이 좋은 회귀 방정식이 된다. 최소자승법,최소제곱법 & 경사하강법 -> 머신러닝)

predict.lm() 함수로 종속변수 예측 

결정계수는 추정한 선형 모델이 주어진 데이터에 적합한 정도를 재는 척도다.
***(단, 독립변수의 갯수가 단순히 늘어나기만 해도 결정계수가 높아지기 때문에 이러한 단점을 보안한 수정된 결정계수는 결정계수보다 작은 값으로 산출될 수 있다.)***

summary()함수로 결정계수, 수정된 결정계수 및 F통계량, 잔차, 사분위수, 회귀계수를 확인할 수 있다.

coef() 함수를 통해 회귀계수만 출력하여 볼 수 있다. 

attach()

표준화,정규화를 하는 이유는 나중에 머신러닝 할때 이상치가 데이터에 민감하게 반응할 때가 있기 때문에 이러한 이상치를 처리하는 방법 (단위크기에 따라 달라지기도 하므로 표준화,정규화씀)